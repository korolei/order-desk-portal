
<div *ngIf="dataCount > 0" fxFlexFill>
  <mat-toolbar color="warn" class="mat-body-2 mat-elevation-z1 mat-headline" style="height: 45px">
        <span>{{organizationData.bp_name}}</span>
  </mat-toolbar>
<div *ngIf="locations.length > 0" fxLayout="row">
<mat-toolbar color="accent" class="mat-elevation-z1 Aligner-item--bottom" style="height: 50px">
  <div fxFlex="0 1 22%">
    <div class="mat-body-2" fxFlex="0 1 40%">
      <span>Ship-To-Location: </span>
    </div>
    <div fxFlex="0 1 60%">
        <mat-select (selectionChange)="setContact($event.value)" [(value)]="currentLocationId" placeholder="Select Location">
          <mat-option *ngFor="let location of locations" [value]="location.id">
            {{location.city}}
          </mat-option>
        </mat-select>
    </div>
  </div>

  <div *ngIf="currentContact" fxFlex="0 1 88%"  class="mat-body-strong Aligner">
        <div fxFlex="0 1 15%" style="font-size:larger;">
          <mat-icon class="icon">person</mat-icon>
            {{ currentContact.firstName}} {{ currentContact.lastName}}
        </div>
        <div fxFlex="0 1 20%">
          <span>{{ currentContact.jobTitle}}</span>
        </div>
        <div fxFlex="0 1 20%">
          <span>{{ currentContact.email}}</span>
        </div>
        <div fxFlex="0 1 15%">
          <span>{{ currentContact.phone}}</span>
        </div>
        <div fxFlex="0 1 10%">
        <span>{{currentContact.address.city }}, {{ currentContact.address.state }}</span>
        </div>
        <div fxFlex="0 1 10%">
        <span>{{currentContact.address.country }}, {{ currentContact.address.zip }}</span>
        </div>
        <div fxFlex="0 1 5%" class="Aligner-item--bottom">
          <a (click)="editContactInfo()" mat-button>Edit Address</a>
        </div>
      </div>
</mat-toolbar>
  </div>
<div fxLayout="row wrap" fxLayoutGap="5px" fxLayout.lt-md="column" *ngIf="currentContact" style="padding-bottom: 1px;">
    <ng-container>
      <mat-toolbar class="mat-elevation-z1" style="height: 50px">
          <mat-icon class="mat-24">room</mat-icon>
          <div fxFlex="20%" fxLayoutAlign="flex-start">
            <span>{{currentContact.address.street }} - {{ currentContact.address.city }}  {{ currentContact.address.country }}</span>
          </div>
          <div fxFlex="80%" fxLayoutAlign="flex-end">
            <mat-chip-list>
              <mat-chip [routerLink]="['../quotes/quote-form']">+ New Quote</mat-chip>
              <mat-chip [routerLink]="['../orders/order-form']">+ New Order</mat-chip>
            </mat-chip-list>
          </div>
      </mat-toolbar>
    </ng-container>
  </div>
<div fxLayout="row wrap" fxLayout.xs="column" fxLayout.sm="column" fxLayoutWrap fxLayoutAlign="center"
     *ngIf="currentContact">
    <ng-container *ngIf="currentView === allViewScreens[0]">
      <mat-card fxFlex="1 1 calc(28%)">
      <mat-card-header>
        <mat-card-title>
          Install Base <span *ngIf="installBaseData.length > 0" class="mat-body-1">(5 of {{installBaseData.length}} Machines)
        </span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content *ngIf="installBaseData.length > 0">
        <app-install-base [installBaseData]="installBaseData"></app-install-base>
      </mat-card-content>
    </mat-card>
      <mat-card fxFlex="1 2 calc(25%)">
        <mat-card-header>
          <mat-card-title>
            Quick Account Aging
            <span *ngIf="quickAccountAgingData.length > 0" class="mat-body-1">
              <mat-icon class="mat-icon icon">account_circle</mat-icon>Linda Olson?
            </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content *ngIf="quickAccountAgingData.length > 0">
          <app-quick-account-aging [quickAccountAgingData]="quickAccountAgingData"></app-quick-account-aging>
        </mat-card-content>
      </mat-card>
      <mat-card fxFlex="1 1 calc(38%)">
      <mat-card-header>
        <mat-card-title>
          Case Management
          <span *ngIf="caseManagementData.length > 0" class="mat-body-1">(5 of {{caseManagementData.length}} Tickets)
          </span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content *ngIf="caseManagementData.length > 0">
        <app-case-management [caseManagement]="caseManagementData"></app-case-management>
      </mat-card-content>
    </mat-card>
      <mat-card fxFlex="0 1 50%">
      <mat-card-header>
        <mat-card-title>
          Open Quotations
          <span *ngIf="quotationsData.length > 0" class="mat-body-1">(6 of {{quotationsData.length}}) |
          <a mat-button (click)="currentView = allViewScreens[1]">View All</a>
        </span>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content *ngIf="quotationsData.length > 0">
        <app-open-quotes [openQuotes]="quotationsData"></app-open-quotes>
      </mat-card-content>
    </mat-card>
      <mat-card fxFlex="0 1 50%">
        <app-open-orders [ordersData]="ordersData" *ngIf="ordersData.length > 0"></app-open-orders>
      </mat-card>
    </ng-container>
  <ng-container *ngIf="currentView !== allViewScreens[0]">
    <div fxFill *ngIf="currentView === allViewScreens[1]">
      <mat-card fxFlex="0 1 100%">
        <mat-card-header>
          <mat-card-title>
            All Quotations
            <span *ngIf="quotationsData.length > 0" class="mat-body-1">(6 of {{quotationsData.length}}) |
          <a (click)="currentView = allViewScreens[0]" mat-button><< Back</a>
        </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content *ngIf="quotationsData.length > 0">
          <app-open-quotes [openQuotes]="quotationsData"></app-open-quotes>
        </mat-card-content>
      </mat-card>
    </div>
    <div fxFill *ngIf="currentView === allViewScreens[2]">
      <app-all-orders [contactId]="currentContact.id"></app-all-orders>
    </div>
    <div fxFill *ngIf="currentView === allViewScreens[3]">
      <mat-card fxFlex="0 1 100%">
        <mat-card-header>
          <mat-card-title>
            All Install Base <span *ngIf="installBaseData.length > 0" class="mat-body-1">(5 of {{installBaseData.length}} Machines) |
          <a (click)="currentView = allViewScreens[0]" mat-button><< Back</a>
        </span>
          </mat-card-title>
        </mat-card-header>
          <app-install-base [installBaseData]="installBaseData"></app-install-base>
      </mat-card>
    </div>
    <div fxFill *ngIf="currentView === allViewScreens[4]">
      <mat-card fxFlex="0 1 100%">
        <mat-card-header>
          <mat-card-title>
            Case Management
            <span *ngIf="caseManagementData.length > 0" class="mat-body-1">(5 of {{caseManagementData.length}} Tickets) |
           <a (click)="currentView = allViewScreens[0]" mat-button><< Back</a>
          </span>
          </mat-card-title>
        </mat-card-header>
        <mat-card-content *ngIf="caseManagementData.length > 0">
          <app-case-management [caseManagement]="caseManagementData"></app-case-management>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-container>
  <ng-container *ngIf="dataCount < maxCount">
    <div fxLayout="row" fxLaoutAlign="center" class="loading-spinner">
      <mat-spinner></mat-spinner>
    </div>
  </ng-container>
  </div >
</div>
